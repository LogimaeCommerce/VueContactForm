{"remainingRequest":"/Users/dutyuzh/Sites/dashautyuzh.io/node_modules/babel-loader/lib/index.js!/Users/dutyuzh/Sites/dashautyuzh.io/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dutyuzh/Sites/dashautyuzh.io/src/components/BlogFeed.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/dutyuzh/Sites/dashautyuzh.io/src/components/BlogFeed.vue","mtime":1534793018000},{"path":"/Users/dutyuzh/Sites/dashautyuzh.io/node_modules/cache-loader/dist/cjs.js","mtime":1530108614324},{"path":"/Users/dutyuzh/Sites/dashautyuzh.io/node_modules/babel-loader/lib/index.js","mtime":1529635966000},{"path":"/Users/dutyuzh/Sites/dashautyuzh.io/node_modules/vue-loader/lib/index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.keys\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { scrollTo, kebabify, prettyDate } from '../helpers';\nexport default {\n  name: 'blog-feed',\n  resource: 'BlogFeed',\n  props: {\n    filters: {\n      type: Object,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    return {\n      posts: [],\n      transition: 'preview-appear'\n    };\n  },\n  computed: {\n    reading: function reading() {\n      return this.filters.post;\n    },\n    scrollDelay: function scrollDelay() {\n      return this.$device.phone ? 0 : 560;\n    },\n    figureClass: function figureClass() {\n      return {\n        'preview__figure--mobile': this.$device.phone && this.reading\n      };\n    },\n    feed: function feed() {\n      var _this = this;\n\n      var filterBy = {\n        post: function post(filter, _ref) {\n          var id = _ref.id;\n          return filter === id;\n        },\n        author: function author(filter, _ref2) {\n          var _author = _ref2.author;\n          return filter === _this.kebabify(_author);\n        }\n      };\n      if (!Object.keys(this.filters).length) return this.posts;\n      return this.posts.filter(function (post) {\n        return Object.keys(_this.filters).every(function (filter) {\n          return filterBy[filter](_this.filters[filter], post);\n        });\n      });\n    }\n  },\n  methods: {\n    scrollTo: scrollTo,\n    kebabify: kebabify,\n    prettyDate: prettyDate,\n    getBgImg: function getBgImg(src) {\n      return {\n        backgroundImage: \"url(\".concat(src, \")\")\n      };\n    },\n    stackPosts: function stackPosts(posts) {\n      var _this2 = this;\n\n      var interval;\n\n      var stack = function stack() {\n        _this2.posts.push(posts.shift());\n\n        if (!posts.length) {\n          _this2.transition = 'preview';\n          clearInterval(interval);\n        }\n      };\n\n      interval = setInterval(stack, 125);\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.$getResource('feed').then(function (posts) {\n      if (!Object.keys(_this3.filters).length) {\n        _this3.stackPosts(posts);\n      } else {\n        _this3.posts = posts;\n        _this3.transition = 'preview';\n      }\n    });\n  }\n};",{"version":3,"sources":["BlogFeed.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAAA,QAAA,EAAA,QAAA,EAAA,UAAA,QAAA,YAAA;AAEA,eAAA;AACA,QAAA,WADA;AAEA,YAAA,UAFA;AAIA,SAAA;AACA,aAAA;AACA,YAAA,MADA;AAEA,eAAA,oBAAA,CAAA;AAFA;AADA,GAJA;AAWA,MAXA,kBAWA;AACA,WAAA;AACA,aAAA,EADA;AAEA,kBAAA;AAFA,KAAA;AAIA,GAhBA;AAkBA,YAAA;AACA,WADA,qBACA;AAAA,aAAA,KAAA,OAAA,CAAA,IAAA;AAAA,KADA;AAEA,eAFA,yBAEA;AAAA,aAAA,KAAA,OAAA,CAAA,KAAA,GAAA,CAAA,GAAA,GAAA;AAAA,KAFA;AAGA,eAHA,yBAGA;AACA,aAAA;AAAA,mCAAA,KAAA,OAAA,CAAA,KAAA,IAAA,KAAA;AAAA,OAAA;AACA,KALA;AAMA,QANA,kBAMA;AAAA;;AACA,UAAA,WAAA;AACA,cAAA,cAAA,MAAA;AAAA,cAAA,EAAA,QAAA,EAAA;AAAA,iBAAA,WAAA,EAAA;AAAA,SADA;AAEA,gBAAA,gBAAA,MAAA;AAAA,cAAA,OAAA,SAAA,MAAA;AAAA,iBAAA,WAAA,MAAA,QAAA,CAAA,OAAA,CAAA;AAAA;AAFA,OAAA;AAKA,UAAA,CAAA,OAAA,IAAA,CAAA,KAAA,OAAA,EAAA,MAAA,EAAA,OAAA,KAAA,KAAA;AAEA,aAAA,KAAA,KAAA,CAAA,MAAA,CAAA,gBAAA;AACA,eAAA,OAAA,IAAA,CAAA,MAAA,OAAA,EAAA,KAAA,CAAA,kBAAA;AACA,iBAAA,SAAA,MAAA,EAAA,MAAA,OAAA,CAAA,MAAA,CAAA,EAAA,IAAA,CAAA;AACA,SAFA,CAAA;AAGA,OAJA,CAAA;AAKA;AAnBA,GAlBA;AAwCA,WAAA;AACA,sBADA;AAEA,sBAFA;AAGA,0BAHA;AAIA,YAJA,oBAIA,GAJA,EAIA;AACA,aAAA;AAAA,uCAAA,GAAA;AAAA,OAAA;AACA,KANA;AAOA,cAPA,sBAOA,KAPA,EAOA;AAAA;;AACA,UAAA,QAAA;;AACA,UAAA,QAAA,SAAA,KAAA,GAAA;AACA,eAAA,KAAA,CAAA,IAAA,CAAA,MAAA,KAAA,EAAA;;AAEA,YAAA,CAAA,MAAA,MAAA,EAAA;AACA,iBAAA,UAAA,GAAA,SAAA;AACA,wBAAA,QAAA;AACA;AACA,OAPA;;AASA,iBAAA,YAAA,KAAA,EAAA,GAAA,CAAA;AACA;AAnBA,GAxCA;AA8DA,SA9DA,qBA8DA;AAAA;;AACA,SAAA,YAAA,CAAA,MAAA,EACA,IADA,CACA,iBAAA;AACA,UAAA,CAAA,OAAA,IAAA,CAAA,OAAA,OAAA,EAAA,MAAA,EAAA;AACA,eAAA,UAAA,CAAA,KAAA;AACA,OAFA,MAEA;AACA,eAAA,KAAA,GAAA,KAAA;AACA,eAAA,UAAA,GAAA,SAAA;AACA;AACA,KARA;AASA;AAxEA,CAAA","sourcesContent":["<template>\n  <transition-group tag=\"ul\" :name=\"transition\"  class=\"blog__feed\">\n    <li v-for=\"post in feed\" class=\"preview\" :key=\"post.id\">\n      <figure class=\"preview__figure\" :class=\"figureClass\" :style=\"getBgImg(post.image)\">\n        <transition name=\"v--fade\">\n          <figcaption v-if=\"!reading || $device.phone\" class=\"preview__details\">\n            <router-link class=\"preview__title\"\n              :to=\"`/read/${post.id}`\"\n              @click.native=\"scrollTo(0, 220, scrollDelay)\">\n              {{ post.title }}\n            </router-link>\n\n            <div class=\"preview__meta\">\n              <time class=\"preview__published\">\n                {{ prettyDate(post.published) }}\n              </time>\n\n              <router-link class=\"preview__author\"\n                :to=\"`/by/${kebabify(post.author)}`\"\n                @click.native=\"scrollTo(0, 220, scrollDelay)\">\n                {{ post.author }}\n              </router-link>\n            </div>\n          </figcaption>\n        </transition>\n      </figure>\n    </li>\n  </transition-group>\n</template>\n\n<script>\nimport { scrollTo, kebabify, prettyDate } from '../helpers'\n\nexport default {\n  name: 'blog-feed',\n  resource: 'BlogFeed',\n\n  props: {\n    filters: {\n      type: Object,\n      default: () => {}\n    }\n  },\n\n  data() {\n    return {\n      posts: [],\n      transition: 'preview-appear'\n    }\n  },\n\n  computed: {\n    reading() { return this.filters.post },\n    scrollDelay() { return (this.$device.phone) ? 0 : 560 },\n    figureClass() {\n      return { 'preview__figure--mobile': this.$device.phone && this.reading }\n    },\n    feed() {\n      const filterBy = {\n        post: (filter, { id }) => filter === id,\n        author: (filter, { author }) => filter === this.kebabify(author)\n      }\n\n      if (!Object.keys(this.filters).length) return this.posts\n\n      return this.posts.filter(post => {\n        return Object.keys(this.filters).every(filter => {\n          return filterBy[filter](this.filters[filter], post)\n        })\n      })\n    }\n  },\n\n  methods: {\n    scrollTo,\n    kebabify,\n    prettyDate,\n    getBgImg(src) {\n      return { backgroundImage: `url(${src})` }\n    },\n    stackPosts(posts) {\n      let interval\n      const stack = () => {\n        this.posts.push(posts.shift())\n\n        if (!posts.length) {\n          this.transition = 'preview'\n          clearInterval(interval)\n        }\n      }\n\n      interval = setInterval(stack, 125)\n    }\n  },\n\n  mounted() {\n    this.$getResource('feed')\n      .then(posts => {\n        if (!Object.keys(this.filters).length) {\n          this.stackPosts(posts)\n        } else {\n          this.posts = posts\n          this.transition = 'preview'\n        }\n      })\n  }\n}\n</script>\n"],"sourceRoot":"src/components"}]}